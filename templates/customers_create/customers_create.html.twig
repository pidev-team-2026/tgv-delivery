<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="x-ua-compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>

    <title>Créer Compte - Delivery App</title>

    <link rel="shortcut icon" href="{{ asset('assets/images/favicon.ico') }}"/>
    <link rel="stylesheet" href="{{ asset('assets/css/bootstrap.min.css') }}"/>
    <link rel="stylesheet" href="{{ asset('assets/vendors/css/vendors.min.css') }}"/>
    <link rel="stylesheet" href="{{ asset('assets/css/theme.min.css') }}"/>
</head>

<body>

{% include 'partials/duralux_navbar.html.twig' %}
{% include 'partials/duralux_header.html.twig' %}

<main class="nxl-container">
    <div class="nxl-content">

        <!-- ===== Page Header ===== -->
        <div class="page-header mb-4">
            <div class="page-header-left d-flex align-items-center">
                <div class="page-header-title">
                    <h5>Créer Compte</h5>
                </div>
                <ul class="breadcrumb">
                    <li class="breadcrumb-item">
                        <a href="{{ path('app_home') }}">Accueil</a>
                    </li>
                    <li class="breadcrumb-item active">Créer</li>
                </ul>
            </div>
        </div>

        <!-- ===== Flash Messages ===== -->
        {% for label, messages in app.flashes %}
            {% for message in messages %}
                <div class="alert alert-{{ label }} alert-dismissible fade show">
                    {{ message }}
                    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                </div>
            {% endfor %}
        {% endfor %}

        <div class="row">
            <div class="col-12">

                <!-- ===== Role Switcher ===== -->
                <div class="mb-4">
                    <label class="form-label fw-bold">Créer un compte en tant que:</label>
                    <div class="btn-group w-100" role="group">
                        <a href="{{ path('app_customers_create', { role: 'client' }) }}"
                           class="btn btn-outline-primary flex-fill {{ role == 'client' ? 'active' : '' }}">
                            <i class="feather-user me-1"></i> Client
                        </a>
                        <a href="{{ path('app_customers_create', { role: 'merchant' }) }}"
                           class="btn btn-outline-primary flex-fill {{ role == 'merchant' ? 'active' : '' }}">
                            <i class="feather-shopping-bag me-1"></i> Marchand
                        </a>
                        <a href="{{ path('app_customers_create', { role: 'courier' }) }}"
                           class="btn btn-outline-primary flex-fill {{ role == 'courier' ? 'active' : '' }}">
                            <i class="feather-truck me-1"></i> Livreur
                        </a>
                    </div>
                </div>

                <!-- ===== Registration Form ===== -->
                <div class="card">
                    <div class="card-body">

                        <h6 class="mb-4 text-capitalize">
                            <i class="feather-user-plus me-2"></i>Informations {{ role == 'merchant' ? 'Marchand' : role == 'courier' ? 'Livreur' : 'Client' }}
                        </h6>

                        {{ form_start(form, {
                            action: path('app_customers_create', { role: role }),
                            method: 'POST',
                            attr: { novalidate: 'novalidate' }
                        }) }}

                        <div class="row g-3">

                            <!-- Common fields -->
                            <div class="col-md-6">
                                {{ form_row(form.firstName, {
                                    attr: { class: 'form-control' },
                                    label_attr: { class: 'form-label fw-semibold' }
                                }) }}
                            </div>
                            <div class="col-md-6">
                                {{ form_row(form.lastName, {
                                    attr: { class: 'form-control' },
                                    label_attr: { class: 'form-label fw-semibold' }
                                }) }}
                            </div>
                            <div class="col-md-6">
                                {{ form_row(form.email, {
                                    attr: { class: 'form-control' },
                                    label_attr: { class: 'form-label fw-semibold' }
                                }) }}
                            </div>
                            <div class="col-md-6">
                                {{ form_row(form.phone, {
                                    attr: { class: 'form-control' },
                                    label_attr: { class: 'form-label fw-semibold' }
                                }) }}
                            </div>
                            <div class="col-md-6">
                                {{ form_row(form.password, {
                                    attr: { class: 'form-control' },
                                    label_attr: { class: 'form-label fw-semibold' }
                                }) }}
                            </div>
                            <div class="col-md-6">
                                {{ form_row(form.confirmPassword, {
                                    attr: { class: 'form-control' },
                                    label_attr: { class: 'form-label fw-semibold' }
                                }) }}
                            </div>

                            <!-- Merchant fields -->
                            {% if role == 'merchant' %}
                                <div class="col-12 mt-3">
                                    <h6 class="text-primary fw-semibold mb-3">
                                        <i class="feather-shopping-bag me-2"></i>Informations Entreprise
                                    </h6>
                                </div>
                                <div class="col-md-6">
                                    {{ form_row(form.cin, {
                                        attr: { class: 'form-control' },
                                        label_attr: { class: 'form-label fw-semibold' }
                                    }) }}
                                </div>
                                <div class="col-md-6">
                                    {{ form_row(form.businessName, {
                                        attr: { class: 'form-control' },
                                        label_attr: { class: 'form-label fw-semibold' }
                                    }) }}
                                </div>
                                <div class="col-md-6">
                                    {{ form_row(form.businessType, {
                                        attr: { class: 'form-control' },
                                        label_attr: { class: 'form-label fw-semibold' }
                                    }) }}
                                </div>
                                <div class="col-md-6">
                                    {{ form_row(form.location, {
                                        attr: { class: 'form-control' },
                                        label_attr: { class: 'form-label fw-semibold' }
                                    }) }}
                                </div>
                            {% endif %}

                            <!-- Courier fields -->
                            {% if role == 'courier' %}
                                <div class="col-12 mt-3">
                                    <h6 class="text-primary fw-semibold mb-3">
                                        <i class="feather-truck me-2"></i>Informations Livraison
                                    </h6>
                                </div>
                                <div class="col-md-6">
                                    {{ form_row(form.cin, {
                                        attr: { class: 'form-control' },
                                        label_attr: { class: 'form-label fw-semibold' }
                                    }) }}
                                </div>
                                <div class="col-md-6">
                                    {{ form_row(form.licenseNumber, {
                                        attr: { class: 'form-control' },
                                        label_attr: { class: 'form-label fw-semibold' }
                                    }) }}
                                </div>
                                <div class="col-md-6">
                                    {{ form_row(form.vehicleType, {
                                        attr: { class: 'form-control' },
                                        label_attr: { class: 'form-label fw-semibold' }
                                    }) }}
                                </div>
                            {% endif %}

                        </div>

                        <div class="mt-4">
                            <button type="submit" class="btn btn-primary btn-lg">
                                <i class="feather-user-plus me-2"></i>Créer Compte {{ role == 'merchant' ? 'Marchand' : role == 'courier' ? 'Livreur' : 'Client' }}
                            </button>
                        </div>

                        {{ form_end(form) }}

                    </div>
                </div>

            </div>
        </div>

    </div>

    {% include 'partials/duralux_footer.html.twig' %}
</main>

<!-- ===== JS ===== -->
<script src="{{ asset('assets/vendors/js/vendors.min.js') }}"></script>
<script src="{{ asset('assets/js/common-init.min.js') }}"></script>
<script src="{{ asset('assets/js/theme-customizer-init.min.js') }}"></script>

</body>
</html>
