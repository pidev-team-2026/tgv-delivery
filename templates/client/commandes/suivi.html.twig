{% extends "shop/base_client.html.twig" %}

{% block title %}Suivi de ma commande - TGV Delivery{% endblock %}

{% block hero %}
<div class="hero">
    <h1><i class="bi bi-truck"></i> Suivi de ma commande</h1>
    <p>Visualisez l'état actuel de votre commande et suivez son parcours jusqu'à la livraison</p>
</div>
{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('css/suivi.css') }}">
{% endblock %}

{% block content %}

<!-- Formulaire de recherche -->
{% include 'client/commande/suivi_search.html.twig' %}

{% if commande %}
    <!-- Informations de la commande -->
    {% include 'client/commande/suivi_info_card.html.twig' with {'commande': commande} %}


    <!-- Détails des produits -->
    {% include 'client/commande/suivi_produits.html.twig' with {'commande': commande} %}

    <!-- Actions -->
    <div class="row mb-4">
        <div class="col-md-8 offset-md-2 text-center">
            <a href="{{ path('app_shop_index') }}" class="btn btn-outline-primary">
                <i class="bi bi-house"></i> Retour à l'accueil
            </a>
            {% if commande.statut not in ['livrée', 'annulée'] %}
                <button class="btn btn-outline-danger" onclick="if(confirm('Voulez-vous vraiment annuler cette commande ?')) alert('Contactez le support pour annuler');">
                    <i class="bi bi-x-circle"></i> Annuler la commande
                </button>
            {% endif %}
        </div>
    </div>

{% elseif reference %}
    <!-- Aucune commande trouvée -->
    <div class="row">
        <div class="col-md-8 offset-md-2">
            <div class="alert alert-danger text-center py-5">
                <i class="bi bi-exclamation-triangle" style="font-size: 3rem;"></i>
                <h4 class="mt-3">Commande introuvable</h4>
                <p class="mb-0">Aucune commande trouvée avec la référence <strong>{{ reference }}</strong></p>
                <p class="text-muted small">Vérifiez que vous avez bien saisi la référence complète.</p>
            </div>
        </div>
    </div>
{% endif %}

{% endblock %}            